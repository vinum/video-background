(function(h){$.fn.video_background=function(a){var H="background-video",I="padding",p="0",r="100%",J="position",z="false",A="true",f=false,c=true,s=c,u=c,t=f,q="16:9",d,n=f,v=f,C=f,B=f,D=f,l=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i),N=$(this);if(a.loop!=h){if(a.loop==A)s=c;else if(a.loop==z)s=f}if(a.autoplay!=h){if(a.autoplay==A)u=c;else if(a.autoplay==z)u=f}if(a.muted!=h){if(a.muted==A)t=c;else if(a.muted==z)t=f}var E=(l)?a.formatMobile:a.format;if(E!=h){var O=new RegExp("[0-9][0-9]*:[0-9][0-9]*");if(E.match(O))q=E;else alert("INVALID FORMAT")}var K="",L="",x,w,o=0;while(q[o]!=':'){K+=q[o];o++}x=parseFloat(K,10);o++;while(o<q.length){L+=q[o];o++}w=parseFloat(L,10);if(!l){if(a.mp4!=h)v=c;if(a.webm!=h)C=c;if(a.flv!=h)B=c;if(a.ogg!=h)D=c}else{if(a.mp4Mobile!=h)v=c;if(a.webmMobile!=h)C=c;if(a.flvMobile!=h)B=c;if(a.oggMobile!=h)D=c}var k=$("<div id='background-video'></div>"),g=$("<div id='background-video-mask'></div>");g.css(J,"fixed");g.css("width",r);g.css("height",r);g.css("margin",p);g.css(I,p);g.css("left",p);g.css("top",p);g.css("overflow","hidden");g.css("z-index","-5");k.css(J,"absolute");k.css("margin",p);k.css(I,p);g.append(k);N.append(g);$(window).resize(function(){var i=$(window).width(),m=$(window).height(),e,b;e=i;b=e*w/x;if(b<m){b=m;e=x*b/w}k.css("width",e);k.css("height",b);k.css("left",i/2-e/2);k.css("top",m/2-b/2)});$(window).trigger('resize');function P(i){d=document.getElementById(i.id)}var M=function(){var i='autoplay',m='preload',e="",b="",y="",G=f;if(Modernizr.video.h264&&v){if(l)e=a.mp4Mobile;else e=a.mp4;b="video/mp4"}else if(Modernizr.video.ogg&&D){if(l)e=a.oggMobile;else e=a.ogg;b="video/ogg"}else if(Modernizr.video.webm&&C){if(l)e=a.webmMobile;else e=a.webm;b="video/webm"}else G=c;if(!G){var j=document.createElement('video');j.setAttribute('id','background-video-id');j.setAttribute('width','100%');j.setAttribute('height','100%');j.setAttribute('src',e);j.setAttribute('type',b);if(l)j.setAttribute(m,"auto");else j.setAttribute(m,"metadata");if(u)j.setAttribute(i,i);if(s)j.setAttribute('loop','loop');document.getElementById(H).appendChild(j);d=document.getElementById("background-video-id");d.load();n=c;if(t)background_mute()}},S=function(){k.append('<h1>You need at least Flash Player 9.0</h1>');var b={url:""},y=f;if(v){if(l)b.url=a.mp4Mobile;else b.url=a.mp4}else if(B){if(l)b.url=a.flvMobile;else b.url=a.flv}else y=c;if(!y){b.loop=s;b.autoplay=u;b.muted=t;b.formW=x;b.formH=w;swfobject.embedSWF("flash/video.swf",H,r,r,"9.0",null,b,{allowfullscreen:c,allowScriptAccess:"always",wmode:"transparent"},{name:"background-video-swf"},P)}else M()},T=swfobject.getFlashPlayerVersion();if(T.major>9){S()}else if(Modernizr.video){M()}function Q(){if(n)return !d.paused;else return d.isPlaying()}background_play=function(){if(n)d.play();else d.resume()};background_pause=function(){d.pause()};background_toggle_play=function(){if(Q())background_pause();else background_play()};function R(){if(n)return !(d.volume);else return d.isMute()}background_mute=function(){if(n)d.volume=0;else d.mute()};background_unmute=function(){if(n)d.volume=1;else d.unmute()};background_toggle_sound=function(){if(R())background_unmute();else background_mute()};var F=f;background_hide=function(){background_pause();g.stop().fadeTo(700,0);F=c};background_show=function(){background_play();g.stop().fadeTo(700,1);F=f};background_toggle_hide=function(){if(F)background_show();else background_hide()};background_rewind=function(){if(n)d.currentTime=0;else d.rewind()}}}());